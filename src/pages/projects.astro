---
import { getCollection, type CollectionEntry } from "astro:content";
import ProjectsLayout from "@layouts/ProjectsLayout.astro";

const projects = await getCollection(
  "projects",
  ({ data }: CollectionEntry<"projects">) => !data.draft
);
const sortedProjects = projects.sort(
  (a: CollectionEntry<"projects">, b: CollectionEntry<"projects">) => {
    if (a.data.featured && !b.data.featured) return -1;
    if (!a.data.featured && b.data.featured) return 1;
    return 0;
  }
);
---

<ProjectsLayout projects={sortedProjects} />
